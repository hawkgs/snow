!function(){"use strict";const a={width:640,height:480,fps:30,terminalVelocityRate:5,snowflakeTtl:3e4,snowfallIntensity:4,offScreenOffset:300};class n{constructor(t,e){this.x=t,this.y=e}add(t){t=this.__vectorize(t);return this.x+=t.x,this.y+=t.y,this}divide(t){t=this.__vectorize(t);return this.x/=t.x,this.y/=t.y,this}multiply(t){t=this.__vectorize(t);return this.x*=t.x,this.y*=t.y,this}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){var t=this.magnitude();return 0!==t&&this.divide(new n(t,t)),this}limit(t,e,i,s){this.x=Math.min(this.x,e),this.x=Math.max(t,this.x),this.y=Math.min(this.y,s),this.y=Math.max(i,this.y)}copy(){return new n(this.x,this.y)}__vectorize(t){if(t instanceof n)return t;if("number"==typeof t)return new n(t,t);throw new Error("Vector: Cannot vectorize argument.")}}function e(t){return new n(0,.08*t.mass)}function i(){return new n(.07,0)}function s(t){var t=t.velocity,e=t.magnitude(),e=.1*e*e;return t.multiply(-1),t.normalize(),t.multiply(e)}function h(t){var e=.5<Math.random()?1:-1,e=Math.random()*e*(1<t.mass?t.mass/t.mass*2:1);return new n(e,0)}class o{constructor(t,e,i,s,a){this.location=new n(t,e),this.acceleration=new n(0,0),this.velocity=new n(0,0),this.size=i,this.config=a,this.translucency=s,this.mass=this.__calcMass(),this.createdAt=Date.now(),this.atRest=!1}applyForce(t){t.divide(this.mass),this.acceleration.add(t)}update(){var t,e;this.atRest||this.location.y>=this.config.height-this.size?this.atRest=!0:(this.velocity.add(this.acceleration),e=(t=this.config).terminalVelocityRate*this.size,this.velocity.limit(-e,e,-e,e),this.location.add(this.velocity),this.location.limit(-t.offScreenOffset,t.width+t.offScreenOffset,0,t.height-this.size),this.acceleration.multiply(0))}__calcMass(){return this.size*this.size}}class l{constructor(t){this.config=t,this.snowflakes=[],this.forceFactories=[]}applyForceFactory(t){this.forceFactories.push(t)}update(){this.__createSnowflakeLayer();var e=[];for(let t=0;t<this.snowflakes.length;t++){var i=this.snowflakes[t];if(Date.now()-i.createdAt>=this.config.snowflakeTtl)e.push(t);else if(!i.atRest){for(const s of this.forceFactories)i.applyForce(s({acceleration:i.acceleration.copy(),velocity:i.velocity.copy(),mass:i.mass}));i.update()}}for(const t of e)this.snowflakes.splice(t,1)}__createSnowflakeLayer(){for(let t=0;t<this.config.snowfallIntensity;t++)this.__createSnowflake()}__createSnowflake(){var t=this.config,t=c(-t.offScreenOffset,t.width+t.offScreenOffset),e=c(-500,-200),i=c(1,10)/10,s=c(1,5);this.snowflakes.push(new o(t,e,s,i,this.config))}}function c(t,e){return Math.round(Math.random()*(e-t)+t)}function r(t,n){const o=new l(t),c=(o.applyForceFactory(e),o.applyForceFactory(s),o.applyForceFactory(i),o.applyForceFactory(h),n.getContext("2d"));function r(t,e,i){requestAnimationFrame(()=>r(t,e,i));var s=Date.now();if(t<(i=s-e)){e=s-i%t,c.clearRect(0,0,n.width,n.height),o.update();for(const a of o.snowflakes)c.beginPath(),c.arc(a.location.x,a.location.y,a.size/2,0,2*Math.PI,!1),c.fillStyle=`rgba(255, 255, 255, ${a.translucency})`,c.fill()}}r(1e3/t.fps,Date.now(),0)}window.Snow={attachToElement:function(t,e){var i,e={...a,...e},s=(s=e,(i=document.createElement("canvas")).id="snow-canvas",i.width=s.width,i.height=s.height,i.style.position="absolute",i.style.top="0",i.style.left="0",i);t.appendChild(s),r(e,s)}}}();